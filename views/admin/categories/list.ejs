<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Categories - Admin</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f5f5;
      padding: 2rem;
    }

    h1 {
      color: #8b0000;
      text-align: center;
      margin-bottom: 2rem;
    }

    .category-block {
      background: #fff;
      border: 1px solid #ddd;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
    }

    .category-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .category-info {
      display: flex;
      align-items: center;
    }

    .category-info img {
      height: 60px;
      width: 60px;
      object-fit: cover;
      border-radius: 5px;
      margin-right: 15px;
    }

    .category-name {
      font-size: 1.3rem;
      font-weight: bold;
      color: #222;
    }

    .category-actions a {
      margin-left: 10px;
      text-decoration: none;
      padding: 6px 12px;
      font-size: 0.9rem;
      border-radius: 4px;
      color: white;
    }

    .edit-btn { background: #007bff; }
    .delete-btn { background: #dc3545; }
    .view-btn { background: #28a745; }

    .subcategories {
      margin-top: 15px;
      padding-left: 25px;
    }

    .subcategory {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      padding: 10px;
      background: #f9f9f9;
      border-radius: 6px;
    }

    .subcategory-name {
      font-weight: 500;
    }

    .subcategory-actions a {
      margin-left: 10px;
      text-decoration: none;
      padding: 4px 10px;
      font-size: 0.85rem;
      border-radius: 4px;
      color: white;
    }

    .subcategory .edit-btn { background: #0069d9; }
    .subcategory .delete-btn { background: #c82333; }
    .subcategory .view-btn { background: #218838; }
  </style>
</head>
<body>

  <h1>üìÇ All Categories</h1>
  <a href="/admin/categories/create" style="background:#8b0000; color:white; padding:10px 15px; border-radius:6px; text-decoration:none; margin-bottom:20px; display:inline-block;">‚ûï Create New Category</a>

  <% categories.forEach(cat => { %>
    <div class="category-block">
      <div class="category-header">
        <div class="category-info">
          <img src="<%= cat.coverImage %>" alt="cover" />
          <div class="category-name"><%= cat.name %></div>
        </div>
        <div class="category-actions">
          <a href="/admin/categories/edit/<%= cat._id %>" class="edit-btn">‚úèÔ∏è Edit</a>
          <a href="/admin/categories/delete/<%= cat._id %>" onclick="return confirm('Delete this category?')" class="delete-btn">üóëÔ∏è Delete</a>
          <a href="/category/<%= cat.slug %>" target="_blank" class="view-btn">üëÅ View</a>
        </div>
      </div>

      <% if (cat.subcategories && cat.subcategories.length > 0) { %>
        <div class="subcategories">
          <% cat.subcategories.forEach(sub => { %>
            <div class="subcategory">
              <div class="subcategory-name">‚Ü≥ <%= sub.name %></div>
              <div class="subcategory-actions">
                <a href="/admin/categories/edit/<%= sub._id %>" class="edit-btn">Edit</a>
                <a href="/admin/categories/delete/<%= sub._id %>" onclick="return confirm('Delete this subcategory?')" class="delete-btn">Delete</a>
                <a href="/category/<%= sub.slug %>" target="_blank" class="view-btn">View</a>
              </div>
            </div>
          <% }) %>
        </div>
      <% } %>
    </div>
  <% }) %>

</body>
</html>
